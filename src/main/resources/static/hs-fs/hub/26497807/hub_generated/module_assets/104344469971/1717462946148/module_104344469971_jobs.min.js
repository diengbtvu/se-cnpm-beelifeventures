var module_104344469971=void document.addEventListener("DOMContentLoaded",(()=>{const jobDetailsContainer=document.getElementById("job-details-container"),jobsContainer=document.getElementById("jobs-container"),departmentsSelect=document.getElementById("departments-select"),officesSelect=document.getElementById("offices-select"),jobsFilters=document.getElementById("jobs-filters");let allJobs=[];async function fetchJobs(){try{const response=await fetch("https://api.greenhouse.io/v1/boards/beewise/jobs?content=true"),data=await response.json();return allJobs=data.jobs,renderJobs(allJobs),data.jobs}catch(error){return console.error("Error fetching jobs:",error),[]}}async function fetchDepartments(){try{const response=await fetch("https://api.greenhouse.io/v1/boards/beewise/departments");return(await response.json()).departments.filter((department=>department.jobs.length>0))}catch(error){return console.error("Error fetching departments:",error),[]}}async function fetchOffices(){try{const response=await fetch("https://api.greenhouse.io/v1/boards/beewise/offices");return(await response.json()).offices.filter((office=>office.departments.some((department=>department.jobs.length>0))))}catch(error){return console.error("Error fetching offices:",error),[]}}function renderJobs(jobs){if(jobsContainer.innerHTML="",0===jobs.length){const noJobsMessage=document.createElement("h2");return noJobsMessage.className="nothing-found",noJobsMessage.textContent="Nothing found",void jobsContainer.appendChild(noJobsMessage)}const jobsByDepartment=jobs.reduce(((acc,job)=>(job.departments.forEach((department=>{acc[department.name]||(acc[department.name]=[]),acc[department.name].push(job)})),acc)),{});Object.keys(jobsByDepartment).sort(((a,b)=>{const aHasUSOffice=jobsByDepartment[a].some((job=>job.location.name.toLowerCase().includes("usa"))),bHasUSOffice=jobsByDepartment[b].some((job=>job.location.name.toLowerCase().includes("usa")));return aHasUSOffice&&!bHasUSOffice?-1:!aHasUSOffice&&bHasUSOffice?1:a.localeCompare(b)})).forEach((department=>{const departmentHeader=document.createElement("h3");departmentHeader.textContent=department,departmentHeader.className="title-department",jobsContainer.appendChild(departmentHeader),jobsByDepartment[department].forEach((job=>{const jobElement=document.createElement("div");jobElement.className="job";const title=document.createElement("p");title.className="h4",title.textContent=job.title;const departmentEl=document.createElement("p");departmentEl.innerHTML=`<b>Department: </b>${department}`;const location=document.createElement("p");location.textContent=job.location.name;const applyLink=document.createElement("a");applyLink.className="btn-main",applyLink.href=job.absolute_url,applyLink.textContent="Apply Now",applyLink.target="_blank",jobElement.appendChild(title),jobElement.appendChild(departmentEl),jobElement.appendChild(location),jobElement.appendChild(applyLink),jobsContainer.appendChild(jobElement),jobElement.addEventListener("click",(e=>{e.preventDefault(),renderJobForm(job.id,!0)}))}))}))}function filterJobs(){const selectedDepartment=departmentsSelect.value.toLowerCase(),selectedOffice=officesSelect.value.toLowerCase();renderJobs(allJobs.filter((job=>{const departmentMatch="all"===selectedDepartment||job.departments.some((dep=>dep.name.toLowerCase()===selectedDepartment)),officeMatch="all"===selectedOffice||job.offices&&job.offices.some((off=>off.name.toLowerCase()===selectedOffice));return departmentMatch&&officeMatch})))}function renderJobForm(jobId,openInNewTab=!1){if(openInNewTab)return void window.open(`${window.location.origin}${window.location.pathname}?gh_jid=${jobId}`,"_blank");history.pushState({},"",`?gh_jid=${jobId}`);const formUrl=`https://boards.greenhouse.io/embed/job_app?for=beewise&token=${jobId}`,iframe=document.createElement("iframe");iframe.src=formUrl,iframe.width="100%",iframe.frameBorder="0",jobDetailsContainer.innerHTML="",jobDetailsContainer.appendChild(iframe),jobDetailsContainer.style.display="block",jobsContainer.style.display="none",jobsFilters.style.display="none",iframe.onload=()=>{adjustIframeHeight(iframe)},window.addEventListener("resize",(()=>{adjustIframeHeight(iframe)}))}function adjustIframeHeight(iframe){try{iframe.style.height=iframe.contentWindow.document.documentElement.scrollHeight+"px"}catch(error){console.error("Error adjusting iframe height:",error)}}!async function(){const jobId=new URLSearchParams(window.location.search).get("gh_jid");if(jobId)renderJobForm(jobId),jobDetailsContainer.scrollIntoView({behavior:"smooth"});else{const[jobs,departments,offices]=await Promise.all([fetchJobs(),fetchDepartments(),fetchOffices()]);!function(departments){departments.forEach((department=>{const option=document.createElement("option");option.value=department.name,option.textContent=department.name,departmentsSelect.appendChild(option)}))}(departments),function(offices){offices.sort(((a,b)=>{const aIsUSA=a.name.toLowerCase().includes("usa"),bIsUSA=b.name.toLowerCase().includes("usa");return aIsUSA&&!bIsUSA?-1:!aIsUSA&&bIsUSA?1:a.name.localeCompare(b.name)})),offices.forEach((office=>{const option=document.createElement("option");option.value=office.name,option.textContent=office.name,officesSelect.appendChild(option)}))}(offices),departmentsSelect.addEventListener("change",filterJobs),officesSelect.addEventListener("change",filterJobs)}}()}));